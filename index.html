<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>装備ジェネレータ</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #eee; padding: 20px; }
    .legendary { color: gold; font-weight: bold; }
    .epic { color: violet; }
    .rare { color: deepskyblue; }
    .normal { color: white; }
    pre { background: #222; padding: 10px; border-radius: 8px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>装備ジェネレータ</h1>
  <button onclick="generate()">装備を生成</button>
  <pre id="output"></pre>

  <script>
    function random(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    const equipmentList = [
      { name: "鉄の剣", attackRange: [5, 10] },
      { name: "鋼鉄の剣", attackRange: [7, 12] }
    ];

    const rarities = ["Normal", "Rare", "Epic", "Legendary"];
    const rarityToOPCount = {
      Normal: [1, 3],
      Rare: [1, 5],
      Epic: [1, 7],
      Legendary: [1, 10]
    };

    const optionPool = {
      "Lifesteal": {
        Normal: [3, 5],
        Rare: [6, 9],
        Epic: [10, 12],
        Legendary: [13, 15]
      },
      "CritRate": {
        Normal: [2, 4],
        Rare: [5, 7],
        Epic: [8, 10],
        Legendary: [11, 15]
      }
    };

    function generate() {
      const rarity = rarities[random(0, 3)];
      const equipment = equipmentList[random(0, equipmentList.length - 1)];
      const attack = random(equipment.attackRange[0], equipment.attackRange[1]);

      const [minSlot, maxSlot] = rarityToOPCount[rarity];
      const slotCount = random(minSlot, maxSlot);
      const actualOPCount = random(0, slotCount);

      let result = `<span class="${rarity.toLowerCase()}">[${rarity}]</span> ${equipment.name}\n`;
      result += `Attack: ${attack}\nOptions (${slotCount}):\n`;

      const keys = Object.keys(optionPool);
      for (let i = 0; i < slotCount; i++) {
        if (i < actualOPCount) {
          const optName = keys[random(0, keys.length - 1)];
          const range = optionPool[optName][rarity];
          const val = random(range[0], range[1]);
          result += ` - ${optName}: ${val}%\n`;
        } else {
          result += ` - Open Slot\n`;
        }
      }

      document.getElementById("output").innerHTML = result;
    }
  </script>
</body>
</html>
